
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Misi√≥n ¬∑ Evento de Minecraft</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #0a181d;
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 25px;
        }
        .wrapper {
            max-width: 1550px;
            width: 100%;
            background: #0f2a32e0;
            backdrop-filter: blur(4px);
            border-radius: 70px;
            padding: 30px;
            border: 2px solid #4799aa;
            box-shadow: 0 18px 25px black;
        }
        h1 {
            display: flex;
            align-items: center;
            gap: 16px;
            color: #ffeec2;
            font-size: 2rem;
            font-weight: 700;
            border-bottom: 3px solid #6bc2d6;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .grid {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        .canvas-holder {
            flex: 2;
            min-width: 700px;
            background: #0e2c35;
            border-radius: 50px;
            padding: 20px;
            box-shadow: inset 0 0 0 1px #2e889b, inset 0 0 35px #041216;
        }
        canvas {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 45px;
            border: 4px solid #7ccbd8;
            background: radial-gradient(circle at 50% 50%, #184854, #08222a);
            box-shadow: 0 10px 0 #0e404b;
        }
        .side-panel {
            flex: 1;
            min-width: 330px;
            background: #0c2d36f2;
            border-radius: 50px;
            padding: 28px 22px;
            border: 1px solid #58b1c2;
            box-shadow: 0 10px 0 #06303a;
            color: #fffcf0;
            display: flex;
            flex-direction: column;
        }
        .side-panel h2 {
            font-size: 1.9rem;
            border-bottom: 3px solid #97deec;
            padding-bottom: 14px;
            margin-bottom: 25px;
            display: flex;
            gap: 12px;
            color: #ffdd9a;
        }
        .target-card {
            background: #104550e0;
            border-radius: 30px;
            padding: 18px 20px;
            margin-bottom: 18px;
            border-left: 14px solid #3fd4e0;
            backdrop-filter: blur(2px);
            box-shadow: 0 6px 0 #08323b;
        }
        .target-nombre {
            background: #1b6c7c;
            display: inline-block;
            padding: 8px 28px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 1.3rem;
            color: #fffbe3;
            margin-bottom: 8px;
        }
        .target-detalle {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        .killer-tag {
            background: #632c2c;
            padding: 5px 18px;
            border-radius: 40px;
            font-weight: 600;
            border: 1px solid #ffa4a4;
        }
        .alive-tag {
            background: #00695c;
            padding: 5px 18px;
            border-radius: 40px;
            font-weight: 700;
            color: #d0ffbe;
            border: 1px solid #b2ff96;
        }
        .inactive-tag {
            background: #5a4a3a;
            padding: 5px 18px;
            border-radius: 40px;
            font-weight: 600;
            color: #ffe0b0;
            border: 1px solid #d6a86b;
        }
        .forma-mision {
            background: #1d4f59;
            padding: 10px 16px;
            border-radius: 24px;
            margin: 12px 0 4px;
            font-style: italic;
            border-left: 6px solid #ffc293;
            color: #efffef;
            font-size: 0.92rem;
        }
        .libros-badge {
            background: #846f28;
            padding: 4px 16px;
            border-radius: 40px;
            font-weight: 700;
            color: #ffea9e;
            border: 1px solid #ffe166;
        }
        .footnote {
            margin-top: auto;
            background: #005166;
            border-radius: 40px;
            padding: 20px;
            border: 2px dashed #ffdb8a;
            color: #fff7dc;
        }
        @media (max-width:1100px) {
            .canvas-holder { min-width: 100%; }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <h1>
            <i class="fas fa-crosshairs" style="color: #ffae70;"></i> 
            La Misi√≥n ¬∑ Evento de Minecraft
            <i class="fas fa-shield-alt" style="margin-left: auto; color: #b5d1d9;"></i>
        </h1>
        <div class="grid">
            <div class="canvas-holder">
                <canvas id="targetCanvas" width="900" height="900"></canvas>
            </div>
            <div class="side-panel">
                <h2><i class="fas fa-bullseye"></i> Perfil de objetivos</h2>
                <div id="objetivos-list" style="overflow-y: auto; max-height: 760px; padding-right: 5px;"></div>
                <div class="footnote">
                    <i class="fas fa-book-skull"></i> <strong>üìñ Libros del jugador</strong> (solo vivos).<br>
                    <span style="background: #0a5555; padding: 4px 16px; border-radius: 30px;">‚úÖ Vivo ¬∑ Nadie le mat√≥</span><br>
                    <span style="background: #5a4a3a; padding: 4px 16px; border-radius: 30px;">‚è∏Ô∏è Inactividad ¬∑ Abandon√≥</span><br>
                    <span style="background: #632c2c; padding: 4px 16px; border-radius: 30px;">üíÄ Muerto ¬∑ Asesinado</span><br>
                    <span style="background: #3a4f44; padding: 4px 16px; border-radius: 30px; margin-top:8px; display:inline-block;">
                        <i class="fas fa-user-secret"></i> Jugador original: quien deb√≠a realizar la misi√≥n
                    </span>
                </div>
            </div>
        </div>
    </div>
    <script>
        (function(){
            // -------------------------------------------------------------
            // DATOS FINALES - 100% CORRECTOS BASADOS EN OBJETIVO
            // - Bulltran: 0 libros (VIVO) üü°
            // - iPlayerBeta: 1 libro (VIVO) üü°
            // - Tarrk: 0 libros (VIVO) üü°
            // - Jatze: 5 libros (VIVO) üü°
            // - Marcos131: inactividad (abandon√≥) üü§
            // - Avylon: inactividad (abandon√≥) üü§
            // - Nico_v: inactividad (abandon√≥) üü§
            // - Nicolasfrdz: muerto por RayHZ üî¥
            // - Marcoslion: muerto por iPlayerBeta üî¥
            // - Pinpilla: muerto por Jatze üî¥
            // - Biancu: muerto por Jatze üî¥
            // - RayHZ: muerto por RayHZ (suicidio) üî¥
            // - Juanma1307: muerto por RayHZ üî¥
            // -------------------------------------------------------------
            const misiones = [
                { original: "Juanma1307", forma: "Consigue llevartelo a un canal de discord a solas al menos durante 10 minutos", objetivo: "Nicolasfrdz", asesinoFinal: "RayHZ", libros: "-" },
                { original: "Nicolasfrdz", forma: "Haz que te regale voluntariamente un stack de cualquier material", objetivo: "Bulltran", asesinoFinal: "0", libros: "0" },
                { original: "Bulltran", forma: "Consigue que te entregue 5 cubos de leche", objetivo: "Marcos131", asesinoFinal: "inactividad", libros: "-" },
                { original: "Marcos131", forma: "Consigue que te pase por Discord una captura de su inventario", objetivo: "Tarrk", asesinoFinal: "0", libros: "0" },
                { original: "Tarrk", forma: "Hazle un tour privado por todas las canciones que has realizado (/warp Toy Story y /warp Sirenita) y reprod√∫celas al menos 3 veces cada una", objetivo: "iPlayerBeta", asesinoFinal: "0", libros: "1" },
                { original: "iPlayerBeta", forma: "Consigue que te regale exactamente 32 flores de cualquier tipo. (si te da m√°s, se las devuelves)", objetivo: "Marcoslion", asesinoFinal: "iPlayerBeta", libros: "-" },
                { original: "Marcoslion", forma: "Consigue que vaya hacia ti para aparear dos vacas y luego le cantas (o escribes por chat global) la canci√≥n de La Vaca Lola ‚ô´", objetivo: "Nico_v", asesinoFinal: "inactividad", libros: "-" },
                { original: "Nico_v", forma: "Hazle un tour por tu casa (Si no tienes casa, que √©l te haga el tour en la suya) y despu√©s le das carne de zombie como regalo y tiene que quedarsela", objetivo: "Avylon", asesinoFinal: "inactividad", libros: "-" },
                { original: "Avylon", forma: "P√≠dele como favor que te proteja durante 1 noche en exploraci√≥n (tiene que haber mobs)", objetivo: "Jatze", asesinoFinal: "0", libros: "5" },
                { original: "Jatze", forma: "Consigue que te ayude a hacer un columpio en un √°rbol de cerezo.", objetivo: "Pinpilla", asesinoFinal: "Jatze", libros: "-" },
                { original: "Pinpilla", forma: "P√≠dele que te fabrique un set de armadura de cobre (¬°tiene que ser de cobre!) y que te lo entregue.", objetivo: "Biancu", asesinoFinal: "Jatze", libros: "-" },
                { original: "Biancu", forma: "Ing√©niatelas para que se coma un Pez Globo", objetivo: "RayHZ", asesinoFinal: "Jatze", libros: "-" },
                { original: "RayHZ", forma: "Consigue que te cuente un chiste (sea por el juego o por Discord)", objetivo: "Juanma1307", asesinoFinal: "RayHZ", libros: "-" }
            ];

            // Normalizar RayHZ
            misiones.forEach(m => {
                if (m.objetivo === "RayHz") m.objetivo = "RayHZ";
                if (m.asesinoFinal === "RayHz") m.asesinoFinal = "RayHZ";
            });

            // LISTA √öNICA DE OBJETIVOS
            const objetivosUnicos = [
                "Nicolasfrdz", "Bulltran", "Marcos131", "Tarrk", 
                "iPlayerBeta", "Marcoslion", "Nico_v", "Avylon", 
                "Jatze", "Pinpilla", "Biancu", "RayHZ", "Juanma1307"
            ];

            // Libros del objetivo
            const librosDelObjetivo = new Map();
            misiones.forEach(m => {
                if (m.libros !== "-" && m.libros !== undefined) {
                    librosDelObjetivo.set(m.objetivo, m.libros);
                }
            });

            // VIVOS: asesinoFinal = "0"
            const vivosSet = new Set();
            // INACTIVOS: asesinoFinal = "inactividad"  
            const inactivosSet = new Set();
            // MUERTOS: asesinoFinal = jugador (no "0" ni "inactividad")
            const muertosSet = new Set();
            
            misiones.forEach(m => {
                if (m.asesinoFinal === "0") {
                    vivosSet.add(m.objetivo);
                } else if (m.asesinoFinal === "inactividad") {
                    inactivosSet.add(m.objetivo);
                } else {
                    muertosSet.add(m.objetivo);
                }
            });
            
            // ---- CONFIGURACI√ìN DEL C√çRCULO ----
            const N = objetivosUnicos.length;
            const centerX = 450, centerY = 450;
            const radius = 330;
            const labelRadius = radius + 46;
            const startAngle = -Math.PI / 2;

            const positions = {};
            objetivosUnicos.forEach((nombre, idx) => {
                const angle = startAngle + idx * (2 * Math.PI / N);
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                const labelX = centerX + labelRadius * Math.cos(angle);
                const labelY = centerY + labelRadius * Math.sin(angle);
                const bookX = centerX + (radius - 60) * Math.cos(angle);
                const bookY = centerY + (radius - 60) * Math.sin(angle);
                positions[nombre] = { x, y, labelX, labelY, bookX, bookY, angle };
            });

            // Canvas
            const canvas = document.getElementById('targetCanvas');
            const ctx = canvas.getContext('2d');

            function drawCanvas() {
                ctx.clearRect(0, 0, 900, 900);

                // Base c√≠rculo
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius+6, 0, 2*Math.PI);
                ctx.fillStyle = "#0f2d35";
                ctx.shadowBlur = 18;
                ctx.fill();
                ctx.shadowBlur = 0;
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0, 2*Math.PI);
                ctx.fillStyle = "#1e4f5a";
                ctx.fill();
                ctx.strokeStyle = "#91d9e8";
                ctx.lineWidth = 5;
                ctx.stroke();

                // L√≠neas suaves
                ctx.strokeStyle = "#4096a3";
                ctx.lineWidth = 0.8;
                for (let i=0; i<N; i++) {
                    const angle = startAngle + i * (2*Math.PI/N);
                    const x = centerX + (radius-12) * Math.cos(angle);
                    const y = centerY + (radius-12) * Math.sin(angle);
                    ctx.beginPath();
                    ctx.moveTo(centerX, centerY);
                    ctx.lineTo(x, y);
                    ctx.strokeStyle = "#39818e";
                    ctx.stroke();
                }

                // ---- FLECHAS NARANJA: JUGADOR ORIGINAL ‚Üí OBJETIVO ----
                ctx.shadowBlur = 9;
                ctx.shadowColor = "#cbeef5";
                misiones.forEach(m => {
                    const desde = m.original;
                    const hacia = m.objetivo;
                    if (!positions[desde] || !positions[hacia]) return;
                    
                    const p1 = positions[desde];
                    const p2 = positions[hacia];
                    
                    const cpX = (p1.x + p2.x) / 2 + (p2.y - p1.y) * 0.4;
                    const cpY = (p1.y + p2.y) / 2 - (p2.x - p1.x) * 0.4;
                    
                    ctx.beginPath();
                    ctx.moveTo(p1.x, p1.y);
                    ctx.quadraticCurveTo(cpX, cpY, p2.x, p2.y);
                    ctx.strokeStyle = "#ffc99e";
                    ctx.lineWidth = 3.2;
                    ctx.stroke();

                    drawArrowhead(p2.x, p2.y, cpX, cpY, ctx, "#ffb45b");
                });

                // ---- FLECHAS ROJAS EXTERIORES: ASESINO FINAL ‚Üí V√çCTIMA (SOLO JUGADORES) ----
                ctx.shadowColor = "#a10000";
                misiones.forEach(m => {
                    const asesino = m.asesinoFinal;
                    const victima = m.objetivo;
                    
                    if (asesino === "0" || asesino === "inactividad") return;
                    if (!positions[asesino] || !positions[victima]) return;
                    
                    const p1 = positions[asesino];
                    const p2 = positions[victima];
                    
                    const cpX = (p1.x + p2.x) / 2 + (p2.y - p1.y) * 0.7;
                    const cpY = (p1.y + p2.y) / 2 - (p2.x - p1.x) * 0.7;
                    
                    ctx.beginPath();
                    ctx.moveTo(p1.x, p1.y);
                    ctx.quadraticCurveTo(cpX, cpY, p2.x, p2.y);
                    ctx.strokeStyle = "#ff6b6b";
                    ctx.lineWidth = 3.5;
                    ctx.stroke();

                    drawArrowhead(p2.x, p2.y, cpX, cpY, ctx, "#ff4d4d");
                });
                
                ctx.shadowBlur = 0;

                // ---- PUNTOS DE LOS OBJETIVOS (COLOR SEG√öN ESTADO) ----
                objetivosUnicos.forEach(n => {
                    const pos = positions[n];
                    
                    // Sombra gen√©rica
                    ctx.shadowBlur = 14;
                    
                    // Determinar color seg√∫n estado
                    let puntoColor, puntoBorde;
                    if (vivosSet.has(n)) {
                        puntoColor = "#ffe280"; // Amarillo vivo
                        puntoBorde = "#ffbb4a";
                    } else if (inactivosSet.has(n)) {
                        puntoColor = "#b78c5a"; // Marr√≥n inactivo
                        puntoBorde = "#8b5a2b";
                    } else if (muertosSet.has(n)) {
                        puntoColor = "#e05a5a"; // Rojo muerto
                        puntoBorde = "#a13333";
                    } else {
                        puntoColor = "#cccccc"; // Gris por defecto
                        puntoBorde = "#999999";
                    }
                    
                    // Punto exterior
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, 13, 0, 2*Math.PI);
                    ctx.fillStyle = puntoColor;
                    ctx.fill();
                    
                    // Punto interior
                    ctx.beginPath();
                    ctx.arc(pos.x, pos.y, 8, 0, 2*Math.PI);
                    ctx.fillStyle = puntoBorde;
                    ctx.fill();
                });
                ctx.shadowBlur = 0;

                // Nombres de los OBJETIVOS
                ctx.font = "bold 17px 'Inter', sans-serif";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillStyle = "#fffae6";
                ctx.shadowBlur = 7;
                objetivosUnicos.forEach(n => {
                    const pos = positions[n];
                    ctx.fillText(n, pos.labelX, pos.labelY);
                });

                // LIBROS: encima del OBJETIVO VIVO (asesinoFinal = "0")
                ctx.font = "bold 26px 'Inter', sans-serif";
                ctx.fillStyle = "#FFDF85";
                ctx.shadowBlur = 12;
                misiones.forEach(m => {
                    if (m.asesinoFinal === "0") {
                        const objetivoNombre = m.objetivo;
                        const libros = librosDelObjetivo.get(objetivoNombre);
                        if (libros !== undefined && positions[objetivoNombre]) {
                            const pos = positions[objetivoNombre];
                            let libroText = `üìñ ${libros}`;
                            if (libros === "1") libroText = `üìñ 1 libro`;
                            else if (libros === "0") libroText = `üìñ 0 libros`;
                            else libroText = `üìñ ${libros} libros`;
                            ctx.fillText(libroText, pos.bookX, pos.bookY - 45);
                        }
                    }
                });
                ctx.shadowBlur = 0;
            }

            function drawArrowhead(x, y, cpX, cpY, ctx, color) {
                const angle = Math.atan2(y - cpY, x - cpX);
                ctx.fillStyle = color;
                ctx.shadowBlur = 8;
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x - 18 * Math.cos(angle - 0.35), y - 18 * Math.sin(angle - 0.35));
                ctx.lineTo(x - 18 * Math.cos(angle + 0.35), y - 18 * Math.sin(angle + 0.35));
                ctx.closePath();
                ctx.fill();
            }

            drawCanvas();

            // ------- PANEL DE OBJETIVOS -------
            const panelDiv = document.getElementById('objetivos-list');
            function generarPanel() {
                let html = '';
                misiones.forEach(m => {
                    const asesinoFinal = m.asesinoFinal;
                    let asesinoDisplay = '';
                    
                    if (asesinoFinal === "0") {
                        asesinoDisplay = `<span class="alive-tag"><i class="fas fa-heart"></i> Vivo ¬∑ Nadie le mat√≥</span>`;
                    } else if (asesinoFinal === "inactividad") {
                        asesinoDisplay = `<span class="inactive-tag"><i class="fas fa-pause-circle"></i> Inactividad ¬∑ Abandon√≥</span>`;
                    } else {
                        asesinoDisplay = `<span class="killer-tag"><i class="fas fa-skull"></i> ${m.asesinoFinal}</span>`;
                    }

                    const librosObj = librosDelObjetivo.get(m.objetivo);
                    let librosDisplay = '';
                    if (librosObj !== undefined) {
                        if (librosObj === "1") {
                            librosDisplay = `<span class="libros-badge"><i class="fas fa-book"></i> 1 libro</span>`;
                        } else if (librosObj === "0") {
                            librosDisplay = `<span class="libros-badge"><i class="fas fa-book"></i> 0 libros</span>`;
                        } else {
                            librosDisplay = `<span class="libros-badge"><i class="fas fa-book"></i> ${librosObj} libros</span>`;
                        }
                    }

                    html += `<div class="target-card">
                                <div>
                                    <span class="target-nombre"><i class="fas fa-bullseye"></i> ${m.objetivo}</span>
                                    ${librosDisplay}
                                </div>
                                <div class="forma-mision">
                                    <i class="fas fa-user-secret"></i> <strong>Jugador original:</strong> ${m.original}<br>
                                    <i class="fas fa-dice-d6" style="margin-top:6px;"></i> Misi√≥n: ${m.forma}
                                </div>
                                <div class="target-detalle">
                                    <span><i class="fas fa-user-slash"></i> Asesino final:</span>
                                    ${asesinoDisplay}
                                </div>
                            </div>`;
                });
                panelDiv.innerHTML = html;
            }
            generarPanel();

            window.addEventListener('resize', drawCanvas);
        })();
    </script>
</body>
</html>
